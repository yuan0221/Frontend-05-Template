<script>
  let names = Object.getOwnPropertyNames(window);
  function filterOut(names, props) {
    let set = new Set();
    props.forEach((o) => set.add(o));
    return names.filter((e) => !set.has(e));
  }

  // ECMA 262
  {
    let js = new Set();
    let objects = [
      "globalThis",
      "console",
      "BigInt",
      "BigInt64Array",
      "BigUint64Array",
      "Infinity",
      "NaN",
      "undefined",
      "eval",
      "isFinite",
      "isNaN",
      "parseFloat",
      "parseInt",
      "decodeURI",
      "decodeURIComponent",
      "encodeURI",
      "encodeURIComponent",
      "Array",
      "Date",
      "RegExp",
      "Promise",
      "Proxy",
      "Map",
      "WeakMap",
      "Set",
      "WeakSet",
      "Function",
      "Boolean",
      "String",
      "Number",
      "Symbol",
      "Object",
      "Error",
      "EvalError",
      "RangeError",
      "ReferenceError",
      "SyntaxError",
      "TypeError",
      "URIError",
      "ArrayBuffer",
      "SharedArrayBuffer",
      "DataView",
      "Float32Array",
      "Float64Array",
      "Int8Array",
      "Int16Array",
      "Int32Array",
      "Uint8Array",
      "Uint16Array",
      "Uint32Array",
      "Uint8ClampedArray",
      "Atomics",
      "JSON",
      "Math",
      "Reflect",
      "escape",
      "unescape",
    ];
    objects.forEach((o) => js.add(o));
    names = names.filter((e) => !js.has(e));
  }
  names = names
    .filter((e) => {
      try {
        return !(window[e].prototype instanceof Node);
      } catch (err) {
        return true;
      }
    })
    .filter((e) => e != "Node");

  // events

  names = names.filter((e) => !e.match(/^on/));

  // webkit private

  names = names.filter((e) => !e.match(/^webkit/));

  //https://html.spec.whatwg.org/#window

  {
    let names = Object.getOwnPropertyNames(window);
    let js = new Set();
    let objects = [
      "BigInt",
      "BigInt64Array",
      "BigUint64Array",
      "Infinity",
      "NaN",
      "undefined",
      "eval",
      "isFinite",
      "isNaN",
      "parseFloat",
      "parseInt",
      "decodeURI",
      "decodeURIComponent",
      "encodeURI",
      "encodeURIComponent",
      "Array",
      "Date",
      "RegExp",
      "Promise",
      "Proxy",
      "Map",
      "WeakMap",
      "Set",
      "WeakSet",
      "Function",
      "Boolean",
      "String",
      "Number",
      "Symbol",
      "Object",
      "Error",
      "EvalError",
      "RangeError",
      "ReferenceError",
      "SyntaxError",
      "TypeError",
      "URIError",
      "ArrayBuffer",
      "SharedArrayBuffer",
      "DataView",
      "Float32Array",
      "Float64Array",
      "Int8Array",
      "Int16Array",
      "Int32Array",
      "Uint8Array",
      "Uint16Array",
      "Uint32Array",
      "Uint8ClampedArray",
      "Atomics",
      "JSON",
      "Math",
      "Reflect",
      "escape",
      "unescape",
    ];
    objects.forEach((o) => js.add(o));
    names = names.filter((e) => !js.has(e));

    names = names
      .filter((e) => {
        try {
          return !(window[e].prototype instanceof Node);
        } catch (err) {
          return true;
        }
      })
      .filter((e) => e != "Node");

    let windowprops = new Set();
    objects = [
      "window",
      "self",
      "document",
      "name",
      "location",
      "history",
      "customElements",
      "locationbar",
      "menubar",
      " personalbar",
      "scrollbars",
      "statusbar",
      "toolbar",
      "status",
      "close",
      "closed",
      "stop",
      "focus",
      " blur",
      "frames",
      "length",
      "top",
      "opener",
      "parent",
      "frameElement",
      "open",
      "navigator",
      "applicationCache",
      "alert",
      "confirm",
      "prompt",
      "print",
      "postMessage",
      "console",
    ];
    objects.forEach((o) => windowprops.add(o));
    names = names.filter((e) => !windowprops.has(e));
  }

  //https://html.spec.whatwg.org/

  {
    let interfaces = new Set();
    objects = [
      "ApplicationCache",
      "AudioTrack",
      "AudioTrackList",
      "BarProp",
      "BeforeUnloadEvent",
      "BroadcastChannel",
      "CanvasGradient",
      "CanvasPattern",
      "CanvasRenderingContext2D",
      "CloseEvent",
      "CustomElementRegistry",
      "DOMStringList",
      "DOMStringMap",
      "DataTransfer",
      "DataTransferItem",
      "DataTransferItemList",
      "DedicatedWorkerGlobalScope",
      "Document",
      "DragEvent",
      "ErrorEvent",
      "EventSource",
      "External",
      "FormDataEvent",
      "HTMLAllCollection",
      "HashChangeEvent",
      "History",
      "ImageBitmap",
      "ImageBitmapRenderingContext",
      "ImageData",
      "Location",
      "MediaError",
      "MessageChannel",
      "MessageEvent",
      "MessagePort",
      "MimeType",
      "MimeTypeArray",
      "Navigator",
      "OffscreenCanvas",
      "OffscreenCanvasRenderingContext2D",
      "PageTransitionEvent",
      "Path2D",
      "Plugin",
      "PluginArray",
      "PopStateEvent",
      "PromiseRejectionEvent",
      "RadioNodeList",
      "SharedWorker",
      "SharedWorkerGlobalScope",
      "Storage",
      "StorageEvent",
      "TextMetrics",
      "TextTrack",
      "TextTrackCue",
      "TextTrackCueList",
      "TextTrackList",
      "TimeRanges",
      "TrackEvent",
      "ValidityState",
      "VideoTrack",
      "VideoTrackList",
      "WebSocket",
      "Window",
      "Worker",
      "WorkerGlobalScope",
      "WorkerLocation",
      "WorkerNavigator",
    ];
    objects.forEach((o) => interfaces.add(o));

    names = names.filter((e) => !interfaces.has(e));
  }

  //http://www.ecma-international.org/ecma-402/5.0/index.html#Title

  names = names.filter((e) => e != "Intl");

  //https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15

  names = filterOut(names, [
    "WebGLVertexArrayObject",
    "WebGLTransformFeedback",
    "WebGLSync",
    "WebGLSampler",
    "WebGLQuery",
    "WebGL2RenderingContext",
    "WebGLContextEvent",
    "WebGLObject",
    "WebGLBuffer",
    "WebGLFramebuffer",
    "WebGLProgram",
    "WebGLRenderbuffer",
    "WebGLShader",
    "WebGLTexture",
    "WebGLUniformLocation",
    "WebGLActiveInfo",
    "WebGLShaderPrecisionFormat",
    "WebGLRenderingContext",
  ]);

  //https://www.w3.org/TR/webaudio/

  names = filterOut(names, [
    "AudioContext",
    "AudioNode",
    "AnalyserNode",
    "AudioBuffer",
    "AudioBufferSourceNode",
    "AudioDestinationNode",
    "AudioParam",
    "AudioListener",
    "AudioWorklet",
    "AudioWorkletGlobalScope",
    "AudioWorkletNode",
    "AudioWorkletProcessor",
    "BiquadFilterNode",
    "ChannelMergerNode",
    "ChannelSplitterNode",
    "ConstantSourceNode",
    "ConvolverNode",
    "DelayNode",
    "DynamicsCompressorNode",
    "GainNode",
    "IIRFilterNode",
    "MediaElementAudioSourceNode",
    "MediaStreamAudioSourceNode",
    "MediaStreamTrackAudioSourceNode",
    "MediaStreamAudioDestinationNode",
    "PannerNode",
    "PeriodicWave",
    "OscillatorNode",
    "StereoPannerNode",
    "WaveShaperNode",
    "ScriptProcessorNode",
    "AudioProcessingEvent",
  ]);

  //https://encoding.spec.whatwg.org/#dom-textencoder

  names = filterOut(names, [
    "TextDecoder",
    "TextEncoder",
    "TextDecoderStream",
    "TextEncoderStream",
  ]);

  //https://streams.spec.whatwg.org/#blqs-class

  names = filterOut(names, [
    "ReadableStream",
    "ReadableStreamDefaultReader",
    "ReadableStreamBYOBReader",
    "ReadableStreamDefaultController",
    "ReadableByteStreamController",
    "ReadableStreamBYOBRequest",
    "WritableStream",
    "WritableStreamDefaultWriter",
    "WritableStreamDefaultController",
    "TransformStream",
    "TransformStreamDefaultController",
    "ByteLengthQueuingStrategy",
    "CountQueuingStrategy",
  ]);

  //https://wicg.github.io/BackgroundSync/spec/#sync-manager-interface

  names = filterOut(names, ["SyncManager"]);

  // https://www.w3.org/TR/SVG/

  names = filterOut(names, [
    "SVGUnitTypes",
    "SVGTransformList",
    "SVGTransform",
    "SVGStringList",
    "SVGRect",
    "SVGPreserveAspectRatio",
    "SVGPointList",
    "SVGPoint",
    "SVGNumberList",
    "SVGNumber",
    "SVGMatrix",
    "SVGLengthList",
    "SVGLength",
    "SVGAnimatedTransformList",
    "SVGAnimatedString",
    "SVGAnimatedRect",
    "SVGAnimatedPreserveAspectRatio",
    "SVGAnimatedNumberList",
    "SVGAnimatedNumber",
    "SVGAnimatedLengthList",
    "SVGAnimatedLength",
    "SVGAnimatedInteger",
    "SVGAnimatedEnumeration",
    "SVGAnimatedBoolean",
    "SVGAnimatedAngle",
    "SVGAngle",
  ]);

  // https://www.w3.org/TR/2020/WD-css-properties-values-api-1-20201013/#cssom
  // https://www.w3.org/TR/css-typed-om-1/

  names = filterOut(names, [
    "CSSPropertyRule",
    "CSSVariableReferenceValue",
    "CSSUnparsedValue",
    "CSSUnitValue",
    "CSSTranslate",
    "CSSTransformValue",
    "CSSTransformComponent",
    "CSSSupportsRule",
    "CSSStyleValue",
    "CSSStyleSheet",
    "CSSStyleRule",
    "CSSStyleDeclaration",
    "CSSSkewY",
    "CSSSkewX",
    "CSSSkew",
    "CSSScale",
    "CSSRuleList",
    "CSSRule",
    "CSSRotate",
    "CSSPositionValue",
    "CSSPerspective",
    "CSSPageRule",
    "CSSNumericValue",
    "CSSNumericArray",
    "CSSNamespaceRule",
    "CSSMediaRule",
    "CSSMatrixComponent",
    "CSSMathValue",
    "CSSMathSum",
    "CSSMathProduct",
    "CSSMathNegate",
    "CSSMathMin",
    "CSSMathMax",
    "CSSMathInvert",
    "CSSKeywordValue",
    "CSSKeyframesRule",
    "CSSKeyframeRule",
    "CSSImportRule",
    "CSSImageValue",
    "CSSGroupingRule",
    "CSSFontFaceRule",
    "CSSConditionRule",
    "CSS",
  ]);

  // https://www.w3.org/TR/2019/WD-css-animation-worklet-1-20190625/
  // https://www.w3.org/TR/css-transitions-1/

  names = filterOut(names, [
    "AnimationEvent",
    "AnimationEffect",
    "Animation",
    "AnimationPlaybackEvent",
    "AnimationTimeline",
    "CSSAnimation",
    "TransitionEvent",
    "CSSTransition",
  ]);

  // https://xhr.spec.whatwg.org/

  names = filterOut(names, [
    "XMLHttpRequestUpload",
    "XMLHttpRequestEventTarget",
    "XMLHttpRequest",
    "FormDataEvent",
    "FormData",
    "ProgressEvent",
  ]);

  // https://notifications.spec.whatwg.org/

  names = filterOut(names, ["Notification"]);

  // https://url.spec.whatwg.org/

  names = filterOut(names, ["URLSearchParams", "URL"]);

  // https://fetch.spec.whatwg.org/

  names = filterOut(names, ["Headers", "Request", "Body"]);

  // https://storage.spec.whatwg.org/

  names = filterOut(names, [
    "StorageManager",
    "Storage",
    "sessionStorage",
    "localStorage",
  ]);

  // https://www.w3.org/TR/2019/CR-service-workers-1-20191119/

  names = filterOut(names, [
    "ServiceWorker",
    "ServiceWorkerContainer",
    "ServiceWorkerRegistration",
    "Cache",
    "CacheStorage",
  ]);

  // https://www.w3.org/TR/2012/CR-websockets-20120920/
  // https://html.spec.whatwg.org/multipage/web-sockets.html

  names = filterOut(names, ["WebSocket", "CloseEvent"]);

  // https://www.w3.org/TR/2013/REC-performance-timeline-20131212/
  // https://www.w3.org/TR/2019/WD-performance-timeline-2-20191024/

  names = filterOut(names, [
    "PerformanceTiming",
    "PerformanceServerTiming",
    "PerformanceResourceTiming",
    "PerformancePaintTiming",
    "PerformanceObserverEntryList",
    "PerformanceObserver",
    "PerformanceNavigationTiming",
    "PerformanceNavigation",
    "PerformanceMeasure",
    "PerformanceMark",
    "PerformanceLongTaskTiming",
    "PerformanceEventTiming",
    "PerformanceEntry",
    "PerformanceElementTiming",
    "Performance",
  ]);

  // https://www.w3.org/TR/2020/WD-resize-observer-1-20200211/

  names = filterOut(names, [
    "ResizeObserverEntry",
    "ResizeObserver",
    "ResizeObserverSize",
  ]);

  // 数据库 https://www.w3.org/TR/2015/REC-IndexedDB-20150108/

  names = filterOut(names, [
    "IDBVersionChangeEvent",
    "IDBTransaction",
    "IDBRequest",
    "IDBOpenDBRequest",
    "IDBObjectStore",
    "IDBKeyRange",
    "IDBIndex",
    "IDBFactory",
    "IDBDatabase",
    "IDBCursorWithValue",
    "IDBCursor",
    "openDatabase",
  ]);

  // https://dom.spec.whatwg.org/#interface-treewalker

  names = filterOut(names, [
    "Event",
    "TextEvent",
    "CustomEvent",
    "EventTarget",
    "AbortController",
    "AbortSignal",
    "NonElementParentNode",
    "DocumentOrShadowRoot",
    "ParentNode",
    "NonDocumentTypeChildNode",
    "ChildNode",
    "Slottable",
    "NodeList",
    "HTMLCollection",
    "MutationObserver",
    "MutationRecord",
    "Node",
    "Document",
    "XMLDocument",
    "DOMImplementation",
    "DocumentType",
    "DocumentFragment",
    "ShadowRoot",
    "Element",
    "NamedNodeMap",
    "Attr",
    "CharacterData",
    "Text",
    "CDATASection",
    "ProcessingInstruction",
    "Comment",
    "AbstractRange",
    "StaticRange",
    "Range",
    "NodeIterator",
    "TreeWalker",
    "DOMTokenList",
    "XPathResult",
    "XPathExpression",
    "XPathEvaluatorBase",
    "XPathEvaluator",
    "MutationEvent",
    "MutationNameEvent",
    "DOMConfiguration",
    "DOMError",
    "DOMErrorHandler",
    "DOMImplementationList",
    "DOMImplementationSource",
    "DOMLocator",
    "DOMObject",
    "DOMUserData",
    "Entity",
    "EntityReference",
    "NameList",
    "Notation",
    "TypeInfo",
    "UserDataHandler",
    "RangeException",
  ]);

  // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#validitystate

  names = filterOut(names, ["VTTCue"]);

  // https://html.spec.whatwg.org/multipage/#toc-webappapis

  names = filterOut(names, [
    "atob",
    "btoa",
    "setTimeout",
    "setInterval",
    "clearTimeout",
    "clearInterval",
    "Plugin",
    "PluginArray",
    "MimeType",
    "MimeTypeArray",
    "Image",
    "Blob",
    "Animation",
    "AnimationEffect",
    "AnimationEvent",
    "AnimationPlaybackEvent",
    "AnimationTimeline",
    "requestAnimationFrame",
    "cancelAnimationFrame",
    "MessageEvent",
    "MessagePort",
    "MessageChannel",
    "EventSource",
    "CloseEvent",
    "BroadcastChannel",
    "PromiseRejectionEvent",
  ]);

  // https://fetch.spec.whatwg.org/

  names = filterOut(names, ["fetch", "Request", "Response", "Headers"]);

  // https://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSview-getComputedStyle

  names = filterOut(names, [
    "getComputedStyle",
    "matchMedia",
    "MediaQueryListEvent",
    "MediaQueryList",
    "MediaList",
    "StyleSheetList",
    "StyleSheet",
    "StylePropertyMapReadOnly",
    "StylePropertyMap",
  ]);

  // https://drafts.csswg.org/cssom-view/#extensions-to-the-window-interface

  names = filterOut(names, [
    "moveTo",
    "moveBy",
    "resizeTo",
    "resizeBy",
    "scroll",
    "scrollTo",
    "scrollBy",
    "scrollX",
    "scrollY",
    "screenX",
    "screenY",
    "innerHeight",
    "innerWidth",
    "outerHeight",
    "outerWidth",
    "pageXOffset",
    "pageYOffset",
    "devicePixelRatio",
    "screenLeft",
    "screenTop",
  ]);

  // https://drafts.csswg.org/css-font-loading

  names = filterOut(names, ["FontFaceSetLoadEvent", "FontFace"]);

  // https://webaudio.github.io/web-audio-api/

  const WEB_AUDIOAPI = [
    "BaseAudioContext",
    "AudioNode",
    "AudioBuffer",
    "AudioParam",
    "AudioParamMap",
    "AudioListener",
    "AudioProcessingEvent",
    "PeriodicWave",
    "AudioWorklet",
    "OfflineAudioCompletionEvent",
    "MediaDeviceInfo",
    "MediaDevices",
    "MediaKeyMessageEvent",
    "MediaKeys",
    "MediaKeySession",
    "MediaKeyStatusMap",
    "MediaKeySystemAccess",
  ];

  for (const name of names) {
    try {
      if (
        window[name].prototype instanceof BaseAudioContext ||
        window[name].prototype instanceof AudioNode
      ) {
        WEB_AUDIOAPI.push(name);
      }
    } catch (e) {}
  }

  names = filterOut(names, WEB_AUDIOAPI);

  //    https://webaudio.github.io/web-midi-api/

  const WebMidiAPI = [];
  for (const name of names) {
    if (/^MIDI/.test(name)) {
      WebMidiAPI.push(name);
    }
  }

  names = filterOut(names, WebMidiAPI);

  //    https://w3c.github.io/gamepad/extensions.htm
  const GamepadAPI = [];
  for (const name of names) {
    if (/^Gamepad/.test(name)) {
      GamepadAPI.push(name);
    }
  }
  names = filterOut(names, GamepadAPI);

  //    https://w3c.github.io/geolocation-api/

  const GeolocationAPI = [];

  for (const name of names) {
    if (/^Geolocation/.test(name)) {
      GeolocationAPI.push(name);
    }
  }

  names = filterOut(names, GeolocationAPI);

  // https://w3c.github.io/battery/

  names = filterOut(names, ["BatteryManager"]);

  // https://w3c.github.io/deviceorientation/

  names = filterOut(names, [
    "DeviceMotionEvent",
    "DeviceMotionEventAcceleration",
    "DeviceMotionEventRotationRate",
    "DeviceOrientationEvent",
  ]);

  /**
   * W3C screen-orientation
   * https://w3c.github.io/screen-orientation/
   */

  const Screen_orientation = ["screen", "Screen", "ScreenOrientation"];

  names = filterOut(names, Screen_orientation);

  /**
   * Web Authentication
   * https://w3c.github.io/webauthn/
   * Authenticator
   */

  const WebAuthnAPI = [];

  for (const name of names) {
    if (/^Authenticator/i.test(name)) {
      WebAuthnAPI.push(name);
    }
  }
  376;
  names = filterOut(names, WebAuthnAPI);

  /**
   * trusted types
   * https://w3c.github.io/webappsec-trusted-types/dist/spec/
   */

  const TrustedAPI = [];

  for (const name of names) {
    if (/^Trusted/i.test(name)) {
      TrustedAPI.push(name);
    }
  }

  names = filterOut(names, TrustedAPI);

  /**
   * w3c persentation
   * https://w3c.github.io/presentation-api/
   */

  const WebPresentationAPI = [];

  for (const name of names) {
    if (/^Presentation/.test(name)) {
      WebPresentationAPI.push(name);
    }
  }

  names = filterOut(names, WebPresentationAPI);

  // https://w3c.github.io/clipboard-apis/

  names = filterOut(names, ["Clipboard", "ClipboardItem"]);

  // https://w3c.github.io/push-api/

  names = filterOut(names, [
    "PushManager",
    "PushSubscription",
    "PushSubscriptionOptions",
  ]);

  //   https://w3c.github.io/screen-wake-lock

  names = filterOut(names, [
    "WakeLock",
    "WakeLockSentinel",
    "PushSubscriptionOptions",
  ]);

  //  https://w3c.github.io/IntersectionObserver/

  names = filterOut(names, [
    "IntersectionObserver",
    "IntersectionObserverEntry",
  ]);

  // https://w3c.github.io/permissions/

  names = filterOut(names, ["Permissions", "PermissionStatus"]);

  /**
   * Idle Callback
   * https://www.w3.org/TR/requestidlecallback/
   */

  names = filterOut(names, [
    "requestIdleCallback",
    "cancelIdleCallback",
    "IdleDeadline",
  ]);

  /**
   * immersive-web webxr
   * https://www.w3.org/TR/webxr/
   * https://immersive-web.github.io/webxr/
   */

  const WebXRAPI = [];
  for (const name of names) {
    if (/^XR/.test(name)) {
      WebXRAPI.push(name);
    }
  }
  names = filterOut(names, WebXRAPI);

  /**
   * WebAssembly
   * https://www.w3.org/TR/wasm-js-api-1/
   * https://webassembly.github.io/spec/js-api/
   */

  names = filterOut(names, ["WebAssembly"]);

  /**
   * Touch
   * https://www.w3.org/TR/touch-events/
   */

  names = filterOut(names, [
    "Touch",
    "TouchEvent",
    "TouchList",
    "InputDeviceCapabilities",
  ]);

  /**
   * wicg Event timing
   * https://github.com/WICG/event-timing
   */
  names = filterOut(names, ["EventCounts"]);

  // https://wicg.github.io/compression/
  names = filterOut(names, ["DecompressionStream", "CompressionStream"]);

  /**
   * https://wicg.github.io/web-locks/
   */
  names = filterOut(names, ["Lock", "LockManager"]);

  /**
   * https://wicg.github.io/keyboard-map/
   */
  names = filterOut(names, ["Keyboard", "KeyboardLayoutMap"]);

  /**
   * Layout instability
   * https://wicg.github.io/layout-instability/
   */
  names = filterOut(names, ["LayoutShift", "LayoutShiftAttribution"]);

  console.log(names);
</script>
